
# é¦–å±Šå›½é™…â€œè¿œè§æ¯â€å…ƒæ™ºèƒ½æ•°æ®æŒ‘æˆ˜å¤§èµ›â€”â€”åŠ¨ä½œè®¤çŸ¥èµ›é“æ¯”èµ›æ•°æ®

ğŸ”— [**èµ›é¢˜è¯´æ˜**](./assets/èµ›é¢˜è¯´æ˜.pdf) | [**æ¯”èµ›å®˜ç½‘**](http://prospective.tocenet.org/) | [**CENet\'22**](https://www.tocenet.org/)

è¿‘å¹´æ¥ï¼Œäººå·¥æ™ºèƒ½å·²ç»æˆåŠŸåœ°å¯¹å¤šç§äººç±»è‰ºæœ¯è¿›è¡Œå»ºæ¨¡ä¸å­¦ä¹ ã€‚æ·±åº¦å­¦ä¹ ç®—æ³•å·²ç»èƒ½ç”ŸæˆåŒ…æ‹¬è¯—æ­Œè‰ºæœ¯ã€ç»˜ç”»è‰ºæœ¯ã€éŸ³ä¹è‰ºæœ¯ã€èˆè¹ˆè‰ºæœ¯åœ¨å†…çš„å¤šç§äººç±»è‰ºæœ¯å½¢å¼ã€‚æœ¬èµ›é¢˜å…³æ³¨éŸ³ä¹é©±åŠ¨çš„æŒ‡æŒ¥åŠ¨ä½œç”Ÿæˆè¿™ä¸€ä»»åŠ¡ï¼Œä»¥éŸ³ä¹ä¸ºè¾“å…¥ä¿¡å·ï¼Œç”Ÿæˆå¯¹åº”çš„æŒ‡æŒ¥åŠ¨ä½œã€‚

æ¨¡å‹éœ€è¦ä»¥é‡‡æ ·ç‡ä¸º90Hzçš„éŸ³ä¹éŸ³é¢‘æ¢…å°”é¢‘è°±å›¾ä½œä¸ºè¾“å…¥ï¼Œè¾“å‡ºä¸ä¹‹å¯¹åº”çš„æŒ‡æŒ¥åŠ¨ä½œä¸ŠåŠèº«13ä¸ªå…³é”®ç‚¹çš„30HzäºŒç»´åæ ‡åºåˆ—ã€‚ç”Ÿæˆçš„åŠ¨ä½œåº”è‡ªç„¶ï¼Œç¾è§‚ï¼Œä¸éŸ³ä¹èŠ‚å¥åŒæ­¥ä¸”è¯­ä¹‰ç›¸å…³ã€‚åŒæ—¶ï¼Œè¦æ±‚æ¨¡å‹é€‚åº”ä¸åŒçš„éŸ³ä¹èŠ‚å¥ï¼Œå¹¶é€‚åº”åŒ…æ‹¬äº¤å“ä¹ã€æµè¡ŒéŸ³ä¹ã€æ‘‡æ»šéŸ³ä¹ç­‰ä¸åŒçš„éŸ³ä¹é£æ ¼ã€‚


## ğŸ”” News 

**2022-07-05** è‹±æ–‡æ¨¡å‹è®¾è®¡æŠ¥å‘Šæ¨¡æ¿åŒå¤§ä¼šä¼šè®®è®ºæ–‡æ¨¡æ¿ï¼Œå¯åœ¨ [æ­¤å¤„](https://www.tocenet.org/?attachment_id=17608&download=1ã€‚) ä¸‹è½½ã€‚

**2022-07-03** [æµ‹è¯•é›†](https://pan.baidu.com/s/18ecHYk9b4YM5YTcBNn37qQ?pwd=3209 ) ä¸ [æ­Œæ›²åˆ—è¡¨](./assets/æ­Œæ›²åˆ—è¡¨.md) ç°å·²å…¬å¼€ï¼Œè¯·æŒ‰ç…§ [èµ›é¢˜è¯´æ˜](./assets/èµ›é¢˜è¯´æ˜.pdf) ä¸­çš„è¦æ±‚ï¼Œäº2022å¹´7æœˆ7æ—¥12:00å‰æäº¤å‚èµ›ä½œå“ã€‚

**2022-03-21** [ç¬¬åäºŒå±Šè®¡ç®—æœºå·¥ç¨‹ä¸ç½‘ç»œå›½é™…ä¼šè®®ï¼ˆCENet2022ï¼‰æš¨é¦–å±Šå›½é™…â€œè¿œè§æ¯â€å…ƒæ™ºèƒ½æ•°æ®æŒ‘æˆ˜å¤§èµ›é€šçŸ¥](https://www.jscs.org.cn/x1.php?id=770)

**2022-03-21** [é¦–å±Šå›½é™…â€œè¿œè§æ¯â€å…ƒæ™ºèƒ½æ•°æ®æŒ‘æˆ˜å¤§èµ›é€šçŸ¥](https://www.jscs.org.cn/x1.php?id=770)

## ğŸ¶ ConductorMotion100 æ•°æ®é›† 

- è®­ç»ƒé›†ï¼šhttps://pan.baidu.com/s/1Pmtr7V7-9ChJqQp04NOyZg?pwd=3209
- éªŒè¯é›†ï¼šhttps://pan.baidu.com/s/1B5JrZnFCFvI9ABkuJeWoFQ?pwd=3209 
- æµ‹è¯•é›†ï¼šhttps://pan.baidu.com/s/18ecHYk9b4YM5YTcBNn37qQ?pwd=3209 

You can also access the dataset via [**Google Drive**](https://drive.google.com/drive/folders/1I2eFM-vEbqVXtD4sUPmGFSeNZeu_5JMu?usp=sharing)

ConductorMotion100 æ•°æ®é›†åŒ…å«è®­ç»ƒé›†ã€éªŒè¯é›†ä¸æµ‹è¯•é›†ï¼Œæ—¶é•¿åˆ†åˆ«ä¸º90/5/5å°æ—¶ã€‚å°†å‹ç¼©æ–‡ä»¶è§£å‹è‡³ `<Your Dataset Dir>` åï¼Œå¾—åˆ°çš„æ–‡ä»¶ç»“æ„å°†ä¼šæ˜¯ï¼š

```
tree <Your Dataset Dir>
<Your Dataset Dir>
    â”œâ”€â”€â”€train
    â”‚   â”œâ”€â”€â”€0
    â”‚   â”‚       mel.npy
    â”‚   â”‚       motion.npy
    |  ...
    â”‚   â””â”€â”€â”€5268
    â”‚           mel.npy
    â”‚           motion.npy
    â””â”€â”€â”€val
        â”œâ”€â”€â”€0
        â”‚       mel.npy
        â”‚       motion.npy
       ...
        â””â”€â”€â”€290
                mel.npy
                motion.npy
```

æ¯ä¸€ä¸ª  `mel.npy` å’Œ `motion.npy` æ–‡ä»¶å¯¹åº”ç€ <u>60ç§’</u> çš„éŸ³é¢‘é¢‘è°±å›¾ä¸æŒ‡æŒ¥åŠ¨ä½œæ•°æ®ï¼Œä¸¤è€…çš„é‡‡æ ·ç‡åˆ†åˆ«ä¸º <u>90 Hz</u> å’Œ <u>30 Hz</u>ã€‚æ¢…å°”é¢‘è°±å›¾æœ‰ 128 ä¸ªé¢‘æ®µï¼Œå› æ­¤  `mel.shape = (5400, 128)`ã€‚æŒ‡æŒ¥åŠ¨ä½œæ•°æ®ä¸ºä¸ŠåŠèº«13ä¸ªå…³é”®ç‚¹çš„2ç»´åæ ‡ï¼Œå› æ­¤ `motion.shape = (1800, 13, 2)`ã€‚åŠ¨ä½œå…³é”®ç‚¹çš„å…·ä½“æ ¼å¼å¦‚ä¸‹ï¼š

<img src="assets/kpts.jpg" width="33%"  div align=center />

æˆ‘ä»¬æä¾›åŠ è½½ ConductorMotion100 æ•°æ®é›†çš„ä»£ç ï¼Œå®ƒä½äº `utils/dataset.py`ã€‚ä½ å¯ä»¥è¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥è¿›è¡Œæ•°æ®å¯è§†åŒ–ï¼š

```bash
python utils/dataset.py --dataset_dir <Your Dataset Dir>
```

è¿™ä¸ªè„šæœ¬ä¼šéå†æ•°æ®é›†ä¸­çš„æ¯ä¸€ä¸ªæ ·æœ¬å¹¶è¿›è¡Œå¯è§†åŒ–ï¼Œä½ å°†ä¼šå¾—åˆ°ï¼š

<img src="assets/matshow.png">



## âœ è¯„åˆ†æ ‡å‡† 
æ¯”èµ›æœ€ç»ˆå¾—åˆ†ç”±åˆèµ›é¢„æµ‹è¯„æµ‹æŒ‡æ ‡ã€æŠ¥å‘ŠåŠæ¼”ç¤ºè§†é¢‘å¾—åˆ†ã€ç­”è¾©ç°åœºè¡¨ç°å¾—åˆ†ä¸‰éƒ¨åˆ†æ„æˆï¼Œä¸Šè¿°ä¸‰éƒ¨åˆ†å¾—åˆ†å æ¯”åˆ†åˆ«ä¸º40%ã€30%ã€30%ã€‚å‚èµ›é˜Ÿä¼æäº¤çš„æ¨¡å‹å°†åœ¨æµ‹è¯•é›†ä¸Šé€šè¿‡èŠ‚å¥å¯†åº¦è¯¯å·®ã€åŠ›åº¦è½®å»“è¯¯å·®ã€åŠ¨ä½œæ ‡å‡†å·®ç™¾åˆ†æ¯”ã€ç®—æ³•è€—æ—¶è¿™4ç§è¯„ä»·æŒ‡æ ‡è¿›è¡Œæ€§èƒ½è¯„æµ‹ï¼š

- èŠ‚å¥å¯†åº¦è¯¯å·®ï¼ˆRhythm Density Errorï¼ŒRDEï¼‰ï¼šè®¡ç®—çœŸå®åŠ¨ä½œä¸ç”ŸæˆåŠ¨ä½œæ¯ä¸€ä¸ªå…³é”®ç‚¹çš„åŠŸç‡è°±å¯†åº¦ï¼Œå¯¹æ¯”å¾—åˆ°ç»“æœä¸­å¤§äº0.7 Hzçš„éƒ¨åˆ†ï¼Œä»¥åˆ†æç”ŸæˆåŠ¨ä½œçš„èŠ‚å¥æ˜¯å¦æ­£ç¡®ã€‚ 


- åŠ›åº¦è½®å»“è¯¯å·®ï¼ˆStrength Contour Errorï¼ŒSCEï¼‰ï¼šè®¡ç®—çœŸå®åŠ¨ä½œä¸ç”ŸæˆåŠ¨ä½œçš„ä¸€é˜¶å·®åˆ†åé™é‡‡æ ·ï¼Œå°†ä¸åŒå…³é”®ç‚¹çš„ç»“æœç›¸åŠ ï¼Œå¾—åˆ°ä¸¤æ¡åŠ›åº¦è½®å»“ã€‚å¯¹æ¯”åŠ›åº¦è½®å»“çš„å·®å¼‚ï¼Œåˆ†æç”ŸæˆåŠ¨ä½œçš„åŠ›åº¦æ˜¯å¦æ­£ç¡®ã€‚ 


- åŠ¨ä½œæ ‡å‡†å·®ç™¾åˆ†æ¯”ï¼ˆStandard Deviation Percentageï¼ŒSDPï¼‰ï¼šåˆ†åˆ«è®¡ç®—çœŸå®æŒ‡æŒ¥åŠ¨ä½œä¸ç”ŸæˆåŠ¨ä½œçš„æ ‡å‡†å·®,ä»¥ä¹‹æ¯”æ¥åˆ†æç”ŸæˆåŠ¨ä½œçš„å¹…å€¼ä¸çœŸå®åŠ¨ä½œçš„æ¥è¿‘ç¨‹åº¦ã€‚


- æ¨¡å‹ç”Ÿæˆå•ä½æ—¶é•¿çš„æŒ‡æŒ¥åŠ¨ä½œæ‰€éœ€çš„æ—¶é—´ã€‚

RDEã€SCEã€SDP çš„å…·ä½“å®šä¹‰è§ [è¯„ä»·æŒ‡æ ‡å®šä¹‰.pdf](./assets/è¯„ä»·æŒ‡æ ‡å®šä¹‰.pdf)


## ğŸš€ åŸºçº¿æ¨¡å‹ 

æœ¬èµ›é¢˜æä¾›ç”¨äºæ•°æ®é›†åŠ è½½ã€è®­ç»ƒã€è¯„æµ‹ã€å¯è§†åŒ–çš„ pytorch ä»£ç ã€‚æœ¬ä»£ç å®ç°äº†ä¸€ä¸ªè¾“å‡ºä¸ºå¸¸é‡çš„ ``plain model``ã€‚
æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜ç»™å‡ºåŸºäº CNN-LSTM çš„åŸºçº¿æ¨¡å‹ï¼ˆ`CNN-LSTM baseline`ï¼‰åœ¨éªŒè¯é›†ä¸Šçš„è¯„ä»·æŒ‡æ ‡ã€‚è¯¥æ¨¡å‹ä½¿ç”¨4ä¸ªå·ç§¯å±‚ä»æ¢…å°”é¢‘è°±å›¾ä¸­æå–ç‰¹å¾ï¼Œè¾“å…¥2å±‚LSTMç”ŸæˆæŒ‡æŒ¥åŠ¨ä½œï¼Œä½¿ç”¨MSEæŸå¤±å‡½æ•°è¿›è¡Œè®­ç»ƒã€‚
ä½¿ç”¨1å¼  NVIDIA V100 GPUï¼Œä»¥ `1e-3` ä¸ºå­¦ä¹ ç‡ï¼Œ64 ä¸º batch size åœ¨è®­ç»ƒé›†ä¸Šè®­ç»ƒ 100 epoch è€—æ—¶çº¦5å°æ—¶ã€‚

| Model             | RDE    | SCE    | SDP    |
|-------------------|--------|--------|--------|
| `plain model`       | 1.2368 | 3.6436 | 0.00% |
| `CNN-LSTM baseline` | 1.0491 | 2.7472 | 43.63% |


- å…‹éš†ä»£ç 

    ```bash
    git clone https://github.com/ChenDelong1999/VirtualConductor.git
    cd VirtualConductor
    ```

- åˆ›å»º Anaconda è™šæ‹Ÿç¯å¢ƒ

    ```bash
    conda create -n VirtualConductor python=3.6 -y
    conda activate VirtualConductor
    ```

- ç¡®ä¿ CUDA Toolkit, cudnn, pytorch å·²å®‰è£…
    ```bash
    conda install pytorch torchvision torchaudio cudatoolkit=11.3 -c pytorch -y
    # see: https://pytorch.org/get-started/locally/
    ```

- å®‰è£…å…¶å®ƒä¾èµ–

    ```bash
    conda install ffmpeg -c conda-forge -y
    pip install librosa matplotlib scipy tqdm moviepy opencv-python tensorboard
    ```
- è®­ç»ƒæ¨¡å‹

    ```bash
    python train.py --dataset_dir <Your Dataset Dir>
    ``` 
    è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œè¿è¡Œ `tensorboard --logdir runs` æ¥ç›‘æ§è®­ç»ƒè¿‡ç¨‹ã€‚æ¨¡å‹çš„æƒé‡å°†ä¿å­˜åœ¨ `runs/<Your Experiment Log Dir>/checkpoints` æ–‡ä»¶å¤¹ã€‚


- å¯è§†åŒ–ç”Ÿæˆç»“æœ 
    
    å°†éŸ³é¢‘æ–‡ä»¶å¤åˆ¶åˆ° `/test/test_samples/` æ–‡ä»¶å¤¹ï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤
    
    ```bash
    python test_unseen.py --model 'runs/<Your Experiment Log Dir>/checkpoints/checkpoint_latest.pt'
    ```

    `test_unseen.py` å°†ä¼šï¼š
  1. éå† `/test/test_samples/` ä¸‹æ‰€æœ‰çš„éŸ³é¢‘æ–‡ä»¶, 
  2. æå–æ¢…å°”é¢‘è°±å›¾, ç”ŸæˆæŒ‡æŒ¥åŠ¨ä½œï¼Œ
  3. å°†ç»“æœä»¥ `.mp4` æ–‡ä»¶çš„æ ¼å¼ä¿å­˜è‡³ `/test/result/`


## ğŸˆ å¼•ç”¨ 

è¯·åœ¨æ‚¨çš„å‡ºç‰ˆç‰©ä¸­å¼•ç”¨ä»¥ä¸‹æ–‡ç« ï¼š
```bibtex
@article{chen2021virtualconductor,
    author    = {Delong Chen and
                Fan Liu and
                Zewen Li and
                Feng Xu},
    title     = {VirtualConductor: Music-driven Conducting Video Generation System},
    journal   = {CoRR},
    volume    = {abs/2108.04350},
    year      = {2021},
    url       = {https://arxiv.org/abs/2108.04350},
    eprinttype = {arXiv},
    eprint    = {2108.04350}
}
```

```bibtex
@article{jcst2022self,
  author    = {Fan Liu and
               Delong Chen and
               Ruizhi Zhou and
               Sai Yang and
               Feng Xu},
  title     = {Self-Supervised Music Motion Synchronization Learning for Music-Driven
               Conducting Motion Generation},
  journal   = {Journal of Computer Science and Technology},
  volume    = {37},
  number    = {3},
  pages     = {539--558},
  year      = {2022},
  doi       = {10.1007/s11390-022-2030-z},
}
```

```bibtex
@article{li2021survey,
  title={A survey of convolutional neural networks: analysis, applications, and prospects},
  author={Li, Zewen and Liu, Fan and Yang, Wenjie and Peng, Shouheng and Zhou, Jun},
  journal={IEEE Transactions on Neural Networks and Learning Systems},
  year={2021},
  publisher={IEEE}
}

```